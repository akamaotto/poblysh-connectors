{"openapi":"3.1.0","info":{"title":"Poblysh Connectors API","description":"API for managing connectors","license":{"name":""},"version":"0.1.0"},"servers":[{"url":"/","description":"Default server"}],"paths":{"/":{"get":{"tags":["root"],"summary":"Root handler that returns basic service information","operationId":"root","responses":{"200":{"description":"Service information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ServiceInfo"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/config/rate-limit-policy":{"get":{"tags":["configuration"],"summary":"Get rate limit policy configuration","description":"Returns the current rate limit policy configuration including provider overrides.\nThis endpoint is read-only and provides operational visibility into rate limiting behavior.","operationId":"get_rate_limit_policy_config","responses":{"200":{"description":"Rate limit policy configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RateLimitPolicyConfig"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/config/summary":{"get":{"tags":["configuration"],"summary":"Get service configuration summary","description":"Returns a summary of the current service configuration for operational purposes.\nExcludes sensitive information like encryption keys and tokens.","operationId":"get_config_summary","responses":{"200":{"description":"Service configuration summary","content":{"application/json":{"schema":{}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/connect/{provider}":{"post":{"tags":["connections"],"summary":"Start OAuth flow for a provider","description":"Initiates an OAuth authorization flow for the specified provider and tenant.\nReturns a fully formed authorization URL that the client can use to redirect\nthe user to the provider's authorization page.","operationId":"start_oauth","parameters":[{"name":"provider","in":"path","description":"Provider identifier (snake_case, e.g., 'github')","required":true,"schema":{"type":"string"}},{"name":"X-Tenant-Id","in":"header","description":"Tenant identifier (UUID) that scopes the request to a specific tenant","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OAuth authorization URL generated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthorizeUrlResponse"}}}},"400":{"description":"Bad request - provider does not support OAuth2 or missing tenant header","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"Missing or invalid authorization token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"403":{"description":"Insufficient permissions for tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Provider not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/connect/{provider}/callback":{"get":{"tags":["connections"],"summary":"Handle OAuth callback from provider","description":"Completes OAuth flow by exchanging authorization code for tokens and creating a tenant-scoped connection.\nThis is a public endpoint that does not require authentication - the state parameter provides tenant context.","operationId":"oauth_callback","parameters":[{"name":"provider","in":"path","description":"Provider identifier (snake_case, e.g., 'github')","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","description":"Authorization code returned by provider","required":true,"schema":{"type":"string"}},{"name":"state","in":"query","description":"State parameter for CSRF protection and tenant resolution","required":true,"schema":{"type":"string"}},{"name":"error","in":"query","description":"Error returned by provider if authorization was denied","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OAuth flow completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectionResponse"}}}},"400":{"description":"Bad request - missing/invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Provider not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"502":{"description":"Provider error during token exchange","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/connections":{"get":{"tags":["operators"],"summary":"Lists connections for the authenticated tenant with optional provider filtering","operationId":"list_connections","parameters":[{"name":"X-Tenant-Id","in":"header","description":"Tenant identifier (UUID) that scopes the request to a specific tenant","required":true,"schema":{"type":"string"}},{"name":"provider","in":"path","description":"Optional provider filter (snake_case slug, e.g., \"github\")","required":true,"schema":{"type":["string","null"]}},{"name":"limit","in":"path","description":"Maximum number of connections to return (default: 50, max: 100)","required":true,"schema":{"type":["integer","null"],"format":"int64"}},{"name":"cursor","in":"path","description":"Opaque cursor for pagination continuation","required":true,"schema":{"type":["string","null"]}}],"responses":{"200":{"description":"List of tenant connections","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectionsResponse"},"example":{"connections":[{"expires_at":"2024-12-31T23:59:59Z","has_access_token":true,"has_refresh_token":true,"id":"550e8400-e29b-41d4-a716-446655440000","metadata":{"login":"user123"},"provider":"github","token_encryption_version":1}],"next_cursor":null}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/grounded-signals":{"get":{"tags":["grounded-signals"],"summary":"List grounded signals with filtering and pagination","operationId":"list_grounded_signals","parameters":[{"name":"tenant_id","in":"path","description":"Tenant ID (required)","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple","example":"550e8400-e29b-41d4-a716-446655440000"},{"name":"status","in":"path","description":"Filter by status","required":true,"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/GroundedSignalStatus"}]},"style":"simple","example":"recommended"},{"name":"min_score","in":"path","description":"Filter by minimum total score","required":true,"schema":{"type":["number","null"],"format":"float"},"style":"simple","example":0.7},{"name":"limit","in":"path","description":"Maximum number of items to return (default: 50, max: 100)","required":true,"schema":{"type":["integer","null"],"format":"int64"},"style":"simple","example":50},{"name":"offset","in":"path","description":"Number of items to skip (default: 0)","required":true,"schema":{"type":["integer","null"],"format":"int64"},"style":"simple","example":0}],"responses":{"200":{"description":"Grounded signals listed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListGroundedSignalsResponse"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"403":{"description":"Tenant mismatch","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/grounded-signals/{id}":{"get":{"tags":["grounded-signals"],"summary":"Get a grounded signal by ID","operationId":"get_grounded_signal","parameters":[{"name":"id","in":"path","description":"Grounded signal ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Grounded signal details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroundedSignalResponse"}}}},"404":{"description":"Grounded signal not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"delete":{"tags":["grounded-signals"],"summary":"Delete a grounded signal","operationId":"delete_grounded_signal","parameters":[{"name":"id","in":"path","description":"Grounded signal ID","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"204":{"description":"Grounded signal deleted"},"404":{"description":"Grounded signal not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]},"patch":{"tags":["grounded-signals"],"summary":"Update grounded signal status and recommendation","operationId":"update_grounded_signal","parameters":[{"name":"id","in":"path","description":"Grounded signal ID","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateGroundedSignalRequest"}}},"required":true},"responses":{"200":{"description":"Grounded signal updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroundedSignalResponse"}}}},"404":{"description":"Grounded signal not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/healthz":{"get":{"tags":["health"],"summary":"Health check endpoint (public, no auth required)","operationId":"health","responses":{"200":{"description":"Service is healthy","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/jobs":{"get":{"tags":["jobs"],"summary":"List jobs endpoint requiring operator auth and tenant header","operationId":"list_jobs","parameters":[{"name":"cursor","in":"query","description":"Pagination cursor (base64-encoded timestamp)","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"Maximum number of jobs to return (default 50, max 100)","required":false,"schema":{"type":"integer","format":"int32","minimum":0}},{"name":"status","in":"query","description":"Filter by job status","required":false,"schema":{"$ref":"#/components/schemas/JobStatusParam"}},{"name":"provider","in":"query","description":"Filter by provider type","required":false,"schema":{"type":"string"}},{"name":"connection_id","in":"query","description":"Filter by connection ID (UUID)","required":false,"schema":{"type":"string"}},{"name":"job_type","in":"query","description":"Filter by job type","required":false,"schema":{"$ref":"#/components/schemas/JobTypeParam"}},{"name":"started_after","in":"query","description":"Filter jobs that started after this ISO 8601 timestamp","required":false,"schema":{"type":"string"}},{"name":"finished_after","in":"query","description":"Filter jobs that finished after this ISO 8601 timestamp","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of jobs for the tenant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobsResponse"},"example":{"jobs":[{"attempts":1,"connection_id":"550e8400-e29b-41d4-a716-446655440001","finished_at":"2024-01-15T10:32:30Z","id":"550e8400-e29b-41d4-a716-446655440000","job_type":"webhook","priority":50,"provider_slug":"github","retry_after":null,"scheduled_at":"2024-01-15T10:30:00Z","started_at":"2024-01-15T10:30:01Z","status":"succeeded"}],"next_cursor":null}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"Missing or invalid bearer token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/protected/ping":{"get":{"tags":["operators"],"summary":"Protected ping endpoint requiring operator auth and tenant header","operationId":"protected_ping","parameters":[{"name":"X-Tenant-Id","in":"header","description":"Tenant identifier (UUID) that scopes the request to a specific tenant","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Authenticated operator ping","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProtectedPingResponse"}}}},"400":{"description":"Tenant header missing or invalid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"Missing or invalid bearer token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/providers":{"get":{"tags":["providers"],"summary":"Public endpoint to list all available providers","operationId":"list_providers","parameters":[{"name":"limit","in":"path","description":"Maximum number of providers to return (default: 50, max: 100)","required":true,"schema":{"type":["integer","null"],"format":"int64"}},{"name":"cursor","in":"path","description":"Opaque cursor for pagination continuation","required":true,"schema":{"type":["string","null"]}}],"responses":{"200":{"description":"List of available providers","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProvidersResponse"},"example":{"next_cursor":null,"providers":[{"auth_type":"oauth2","name":"github","scopes":["repo","user:email","read:org"],"webhooks":true},{"auth_type":"oauth2","name":"slack","scopes":["channels:read","chat:write","users:read"],"webhooks":true}]}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/readyz":{"get":{"tags":["health"],"summary":"Readiness check endpoint (public, no auth required)","operationId":"ready","responses":{"200":{"description":"Service is ready","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadinessResponse"}}}},"503":{"description":"Service is not ready","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/signals":{"get":{"tags":["signals"],"summary":"List signals with filters and cursor pagination","operationId":"list_signals","parameters":[{"name":"provider","in":"query","description":"Filter by provider slug","required":false,"schema":{"type":"string"}},{"name":"connection_id","in":"query","description":"Filter by connection ID (UUID)","required":false,"schema":{"type":"string"}},{"name":"kind","in":"query","description":"Filter by signal kind","required":false,"schema":{"type":"string"}},{"name":"occurred_after","in":"query","description":"Filter for signals that occurred after this timestamp (RFC3339)","required":false,"schema":{"type":"string"}},{"name":"occurred_before","in":"query","description":"Filter for signals that occurred before this timestamp (RFC3339)","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"Maximum number of signals to return (default: 50, max: 100)","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"cursor","in":"query","description":"Opaque cursor for pagination continuation","required":false,"schema":{"type":"string"}},{"name":"include_payload","in":"query","description":"Whether to include the full payload (default: false)","required":false,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"Signals listed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignalsResponse"},"example":{"next_cursor":"eyJ2ZXJzaW9uIjoxLCJrZXlzIjp7Im9jY3VycmVkX2F0IjoiMjAyNC0wMS0xNVQxMDozMDowMFoiLCJpZCI6IjU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMCJ9fQ==","signals":[{"connection_id":"550e8400-e29b-41d4-a716-446655440001","id":"550e8400-e29b-41d4-a716-446655440000","kind":"issue_created","occurred_at":"2024-01-15T10:30:00Z","provider_slug":"github","received_at":"2024-01-15T10:30:05Z"}]}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"VALIDATION_FAILED","message":"connection_id must be a valid UUID","status":400,"trace_id":"corr-12345678"}}}},"401":{"description":"Missing or invalid bearer token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"UNAUTHORIZED","message":"Authentication required","status":401,"trace_id":"corr-87654321"}}}},"403":{"description":"Forbidden access","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"FORBIDDEN","message":"Insufficient permissions to access signals","status":403,"trace_id":"corr-11111111"}}}},"429":{"description":"Rate limit exceeded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"RATE_LIMITED","message":"Too many requests","retry_after":60,"status":429,"trace_id":"corr-22222222"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"INTERNAL_SERVER_ERROR","message":"An unexpected error occurred","status":500,"trace_id":"corr-33333333"}}}},"502":{"description":"Provider service error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"PROVIDER_ERROR","details":{"body_snippet":"Service temporarily unavailable","provider":"github","status":503},"message":"Provider github returned error status 503","status":502,"trace_id":"corr-44444444"}}}},"503":{"description":"Database unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"},"example":{"code":"DATABASE_UNAVAILABLE","message":"Database service temporarily unavailable","status":503,"trace_id":"corr-55555555"}}}}},"security":[{"bearer_auth":[]}]}},"/webhooks/{provider}":{"post":{"tags":["webhooks"],"summary":"Accept webhook from external provider","description":"This endpoint receives webhook callbacks from external providers. For MVP,\nit requires operator authentication and tenant scoping. A valid connection\ncan be specified via the X-Connection-Id header to enqueue a sync job.","operationId":"ingest_webhook","parameters":[{"name":"X-Tenant-Id","in":"header","description":"Tenant identifier (UUID) that scopes the request to a specific tenant","required":true,"schema":{"type":"string"}},{"name":"X-Connection-Id","in":"header","description":"Optional connection ID to target","required":false,"schema":{"type":["string","null"]}},{"name":"provider","in":"path","description":"Provider slug (e.g., \"github\", \"jira\")","required":true,"schema":{"type":"string","minLength":1},"example":"github"}],"requestBody":{"description":"Webhook payload (opaque to API)","content":{"application/json":{"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Value"}]}}}},"responses":{"202":{"description":"Webhook accepted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookAcceptResponse"}}}},"400":{"description":"Invalid connection ID header","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"Missing or invalid operator token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Provider not found or connection not found for tenant/provider","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}},"security":[{"bearer_auth":[]}]}},"/webhooks/{provider}/{tenant_id}":{"post":{"tags":["webhooks"],"summary":"Accept webhook from external provider via public route with signature verification","description":"This endpoint receives webhook callbacks from external providers with flexible authentication:\n1. **Operator Auth Override**: Valid operator bearer token (`Authorization: Bearer <token>`) bypasses signature verification\n2. **Signature Verification**: Provider-specific signatures are verified when no operator auth is present\n3. **Tenant Context**: The tenant_id in the URL path provides tenant scoping\n\n**Authentication Precedence**:\n- If valid operator bearer token is present → Always accepted (signature verification skipped)\n- Else if valid provider signature is present → Accepted (signature verification required)\n- Else → Rejected with appropriate error\n\n**Provider-Specific Requirements**:\n- **GitHub**: `X-Hub-Signature-256: sha256=<hex>` header\n- **Slack**: `X-Slack-Signature: v0=<hex>` and `X-Slack-Request-Timestamp` headers\n- **Jira/Zoho-Cliq**: `Authorization: Bearer <token>` header\n\n**Error Responses**:\n- `401 UNAUTHORIZED`: Missing/invalid signature when no operator auth, or missing verification config\n- `404 NOT_FOUND`: Unsupported provider\n- `429 RATE_LIMIT_EXCEEDED`: Rate limit exceeded\n- All errors use `application/problem+json` format with SCREAMING_SNAKE_CASE codes","operationId":"ingest_public_webhook","parameters":[{"name":"X-Connection-Id","in":"header","description":"Optional connection ID to target","required":false,"schema":{"type":["string","null"]}},{"name":"Authorization","in":"header","description":"Bearer token for operator auth override OR provider-specific verification (e.g., Zoho Cliq webhooks)","required":false,"schema":{"type":["string","null"]}},{"name":"X-Hub-Signature-256","in":"header","description":"GitHub HMAC-SHA256 signature (required for GitHub webhooks without operator auth)","required":false,"schema":{"type":["string","null"]}},{"name":"X-Slack-Signature","in":"header","description":"Slack HMAC-SHA256 signature (required for Slack webhooks without operator auth)","required":false,"schema":{"type":["string","null"]}},{"name":"X-Slack-Request-Timestamp","in":"header","description":"Slack request timestamp (required for Slack webhooks without operator auth)","required":false,"schema":{"type":["string","null"]}},{"name":"provider","in":"path","description":"Provider slug (e.g., \"github\", \"jira\", \"zoho-cliq\")","required":true,"schema":{"type":"string","minLength":1},"example":"zoho-cliq"},{"name":"tenant_id","in":"path","description":"Tenant UUID for scoping the webhook","required":true,"schema":{"type":"string"},"example":"550e8400-e29b-41d4-a716-446655440000"}],"requestBody":{"description":"Webhook payload (opaque to API)","content":{"application/json":{"schema":{"oneOf":[{"type":"null"},{"$ref":"#/components/schemas/Value"}]}}}},"responses":{"202":{"description":"Webhook accepted (either via operator auth or valid signature)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookAcceptResponse"}}}},"400":{"description":"Invalid connection ID header or malformed request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"401":{"description":"Missing/invalid signature OR webhook verification not configured","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Provider not found or unsupported","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"429":{"description":"Rate limit exceeded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}}},"components":{"schemas":{"ApiError":{"type":"object","description":"Unified API error response structure","required":["code","message"],"properties":{"code":{"type":"string","description":"Error code for programmatic handling"},"details":{"description":"Additional error details (optional)"},"message":{"type":"string","description":"Human-readable error message"},"retry_after":{"type":["integer","null"],"format":"int64","description":"Suggested retry delay in seconds (optional)","minimum":0},"trace_id":{"type":["string","null"],"description":"Correlation trace ID for debugging (optional)"}}},"AuthorizeUrlResponse":{"type":"object","description":"OAuth authorization URL response for API","required":["authorize_url"],"properties":{"authorize_url":{"type":"string","description":"Complete authorization URL for user redirection\nMust be HTTPS, valid per RFC 3986, max 2048 chars, no fragment"}}},"ConnectionInfo":{"type":"object","description":"Connection information returned by OAuth callback","required":["id","provider","metadata"],"properties":{"expires_at":{"type":["string","null"],"description":"Token expiration timestamp (optional)"},"id":{"type":"string","format":"uuid","description":"Connection unique identifier"},"metadata":{"description":"Provider-specific metadata"},"provider":{"type":"string","description":"Provider identifier"}}},"ConnectionResponse":{"type":"object","description":"Connection response for OAuth callback","required":["connection"],"properties":{"connection":{"$ref":"#/components/schemas/ConnectionInfo","description":"Created connection details"}}},"ConnectionsResponse":{"type":"object","description":"Response wrapper for connections listing","required":["connections"],"properties":{"connections":{"type":"array","items":{"$ref":"#/components/schemas/ConnectionInfo"},"description":"List of connections for the tenant"},"next_cursor":{"type":["string","null"],"description":"Opaque cursor for fetching the next page (null if this is the last page)"}}},"GitHubSignatureHeader":{"type":"object","description":"GitHub signature header for webhook verification","required":["X-Hub-Signature-256"],"properties":{"X-Hub-Signature-256":{"type":"string","description":"HMAC-SHA256 signature of the request body (hex string with sha256= prefix)"}}},"GroundedSignalResponse":{"type":"object","description":"Public representation for API responses (excluding internal fields)","required":["id","signal_id","tenant_id","scores","status","evidence","created_at","updated_at"],"properties":{"created_at":{"type":"string","example":"2025-01-01T12:00:00Z"},"evidence":{},"id":{"type":"string","format":"uuid"},"recommendation":{"type":["string","null"]},"scores":{"$ref":"#/components/schemas/SignalScores"},"signal_id":{"type":"string","format":"uuid"},"status":{"$ref":"#/components/schemas/GroundedSignalStatus"},"tenant_id":{"type":"string","format":"uuid"},"updated_at":{"type":"string","example":"2025-01-01T12:05:00Z"}}},"GroundedSignalStatus":{"type":"string","enum":["draft","recommended","actioned"]},"HealthResponse":{"type":"object","description":"Health check response","required":["status","service","version"],"properties":{"service":{"type":"string","description":"Service identifier"},"status":{"type":"string","description":"Service health status"},"version":{"type":"string","description":"Service version"}}},"JobInfo":{"type":"object","description":"Job information response","required":["id","provider_slug","connection_id","job_type","status","priority","attempts","scheduled_at"],"properties":{"attempts":{"type":"integer","format":"int32","description":"Number of attempts made for this job","example":0},"connection_id":{"type":"string","description":"Connection identifier this job is associated with","example":"550e8400-e29b-41d4-a716-446655440000"},"finished_at":{"type":["string","null"],"description":"Timestamp when the job finished execution","example":"2021-01-01T00:02:30Z"},"id":{"type":"string","description":"Unique identifier for the sync job","example":"550e8400-e29b-41d4-a716-446655440000"},"job_type":{"type":"string","description":"Type of job","example":"webhook"},"priority":{"type":"integer","format":"int32","description":"Job priority for scheduling","example":50},"provider_slug":{"type":"string","description":"Slug of the provider this job is for","example":"github"},"retry_after":{"type":["string","null"],"description":"Timestamp when the job becomes eligible for retry after backoff","example":"2021-01-01T00:05:00Z"},"scheduled_at":{"type":"string","description":"Timestamp when the job is scheduled to run","example":"2021-01-01T00:00:00Z"},"started_at":{"type":["string","null"],"description":"Timestamp when the job started execution","example":"2021-01-01T00:00:01Z"},"status":{"type":"string","description":"Current status of the job","example":"queued"}}},"JobStatusParam":{"type":"string","description":"Documented job status values for OpenAPI enumeration","enum":["queued","running","succeeded","failed"]},"JobTypeParam":{"type":"string","description":"Documented job type values for OpenAPI enumeration","enum":["full","incremental","webhook"]},"JobsResponse":{"type":"object","description":"Response payload for jobs listing endpoint","required":["jobs"],"properties":{"jobs":{"type":"array","items":{"$ref":"#/components/schemas/JobInfo"},"description":"List of jobs matching the query"},"next_cursor":{"type":["string","null"],"description":"Opaque cursor for fetching the next page (null if no more pages)"}}},"ListConnectionsQuery":{"type":"object","description":"Query parameters for connections listing","properties":{"cursor":{"type":["string","null"],"description":"Opaque cursor for pagination continuation"},"limit":{"type":["integer","null"],"format":"int64","description":"Maximum number of connections to return (default: 50, max: 100)"},"provider":{"type":["string","null"],"description":"Optional provider filter (snake_case slug, e.g., \"github\")"}}},"ListGroundedSignalsResponse":{"type":"object","description":"Response with pagination metadata","required":["data","pagination"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/GroundedSignalResponse"}},"pagination":{"$ref":"#/components/schemas/PaginationInfo"}}},"ListSignalsQuery":{"type":"object","description":"Query parameters for listing signals","properties":{"connection_id":{"type":["string","null"],"description":"Filter by connection ID (UUID)"},"cursor":{"type":["string","null"],"description":"Opaque cursor for pagination continuation"},"include_payload":{"type":["boolean","null"],"description":"Whether to include the full payload (default: false)"},"kind":{"type":["string","null"],"description":"Filter by signal kind"},"limit":{"type":["integer","null"],"format":"int64","description":"Maximum number of signals to return (default: 50, max: 100)"},"occurred_after":{"type":["string","null"],"description":"Filter for signals that occurred after this timestamp (RFC3339)"},"occurred_before":{"type":["string","null"],"description":"Filter for signals that occurred before this timestamp (RFC3339)"},"provider":{"type":["string","null"],"description":"Filter by provider slug"}}},"OAuthCallbackQuery":{"type":"object","description":"OAuth callback query parameters","required":["code","state"],"properties":{"code":{"type":"string","description":"Authorization code returned by the provider"},"error":{"type":["string","null"],"description":"Error parameter returned by provider (optional, for denial scenarios)"},"state":{"type":"string","description":"State parameter for CSRF protection and tenant resolution"}}},"PaginationInfo":{"type":"object","required":["total","limit","offset","has_more"],"properties":{"has_more":{"type":"boolean"},"limit":{"type":"integer","format":"int64"},"offset":{"type":"integer","format":"int64"},"total":{"type":"integer","format":"int64"}}},"ProtectedPingResponse":{"type":"object","description":"Response payload for protected ping endpoint","required":["message","tenant_id"],"properties":{"message":{"type":"string","description":"Static message confirming protected endpoint access"},"tenant_id":{"type":"string","description":"Tenant identifier echoed back to the caller"}}},"ProviderInfo":{"type":"object","description":"Provider information for public listing","required":["name","auth_type","scopes","webhooks"],"properties":{"auth_type":{"type":"string","description":"Authentication type required by this provider"},"name":{"type":"string","description":"Name of the provider (e.g., \"github\", \"slack\")"},"scopes":{"type":"array","items":{"type":"string"},"description":"List of OAuth scopes this provider may request"},"webhooks":{"type":"boolean","description":"Whether this provider supports webhook events"}}},"ProviderPath":{"type":"object","description":"Path parameter for provider slug","required":["provider"],"properties":{"provider":{"type":"string","description":"Provider slug (e.g., \"github\", \"jira\")"}}},"ProvidersResponse":{"type":"object","description":"Response containing the list of available providers","required":["providers"],"properties":{"next_cursor":{"type":["string","null"],"description":"Opaque cursor for fetching the next page (null if this is the last page)"},"providers":{"type":"array","items":{"$ref":"#/components/schemas/ProviderInfo"},"description":"List of available providers"}}},"RateLimitPolicyConfig":{"type":"object","description":"Rate limit policy configuration for handling provider rate limits","properties":{"BASE_SECONDS":{"type":"integer","format":"int64","description":"Base retry interval in seconds (default: 5)\n\nThe starting backoff time when a rate limit is encountered.\nSubsequent retries use exponential backoff: base_seconds * 2^attempts.\n\nEnvironment variable: `POBLYSH_RATE_LIMIT_BASE_SECONDS`","example":5,"minimum":0},"JITTER_FACTOR":{"type":"number","format":"double","description":"Jitter factor for distributed systems (default: 0.1, range: 0.0-1.0)\n\nRandom factor applied to backoff calculations to prevent thundering\nherd problems when multiple instances retry simultaneously.\nFormula: backoff * (1 ± jitter_factor)\n\nEnvironment variable: `POBLYSH_RATE_LIMIT_JITTER_FACTOR`","example":0.1,"maximum":1,"minimum":0},"MAX_SECONDS":{"type":"integer","format":"int64","description":"Maximum retry interval in seconds (default: 900)\n\nUpper bound for exponential backoff calculations to prevent\nexcessively long retry delays. Must be >= base_seconds.\n\nEnvironment variable: `POBLYSH_RATE_LIMIT_MAX_SECONDS`","example":900,"minimum":0},"PROVIDER_OVERRIDES":{"type":"object","description":"Provider-specific rate limit policy overrides\n\nAllows fine-tuning rate limits for specific providers that may have\ndifferent rate limit behaviors or requirements.","additionalProperties":{"$ref":"#/components/schemas/RateLimitProviderOverride"},"propertyNames":{"type":"string"}}}},"RateLimitProviderOverride":{"type":"object","description":"Provider-specific rate limit policy overrides","properties":{"BASE_SECONDS":{"type":["integer","null"],"format":"int64","description":"Override for base retry interval for this provider\n\nEnvironment variable: `POBLYSH_RATE_LIMIT_PROVIDER_OVERRIDE_{PROVIDER}_BASE_SECONDS`","example":10,"minimum":0},"JITTER_FACTOR":{"type":["number","null"],"format":"double","description":"Override for jitter factor for this provider\n\nEnvironment variable: `POBLYSH_RATE_LIMIT_PROVIDER_OVERRIDE_{PROVIDER}_JITTER_FACTOR`","example":0.2,"maximum":1,"minimum":0},"MAX_SECONDS":{"type":["integer","null"],"format":"int64","description":"Override for maximum retry interval for this provider\n\nEnvironment variable: `POBLYSH_RATE_LIMIT_PROVIDER_OVERRIDE_{PROVIDER}_MAX_SECONDS`","example":1800,"minimum":0}}},"ReadinessResponse":{"type":"object","description":"Readiness check response","required":["status","checks"],"properties":{"checks":{"description":"Dependency status checks"},"status":{"type":"string","description":"Service readiness status"}}},"ServiceInfo":{"type":"object","description":"Basic service information response","required":["service","version"],"properties":{"service":{"type":"string","description":"The name of the service"},"version":{"type":"string","description":"The version of the service"}}},"SignalInfo":{"type":"object","description":"Signal information for API responses","required":["id","provider_slug","connection_id","kind","occurred_at","received_at"],"properties":{"connection_id":{"type":"string","description":"Connection identifier that this signal originated from","example":"550e8400-e29b-41d4-a716-446655440000"},"id":{"type":"string","description":"Unique identifier for the signal","example":"550e8400-e29b-41d4-a716-446655440000"},"kind":{"type":"string","description":"Normalized event kind","example":"issue_created"},"occurred_at":{"type":"string","description":"Timestamp when the event occurred in the provider system","example":"2024-01-15T10:30:00Z"},"payload":{"description":"Normalized event payload (only included when include_payload=true)"},"provider_slug":{"type":"string","description":"Slug of the provider that emitted this signal","example":"github"},"received_at":{"type":"string","description":"Timestamp when the signal was processed by the system","example":"2024-01-15T10:30:05Z"}}},"SignalScores":{"type":"object","description":"Score breakdown for API responses","required":["relevance","novelty","timeliness","impact","alignment","credibility","total"],"properties":{"alignment":{"type":"number","format":"float"},"credibility":{"type":"number","format":"float"},"impact":{"type":"number","format":"float"},"novelty":{"type":"number","format":"float"},"relevance":{"type":"number","format":"float"},"timeliness":{"type":"number","format":"float"},"total":{"type":"number","format":"float"}}},"SignalsResponse":{"type":"object","description":"Response payload for signals endpoint","required":["signals"],"properties":{"next_cursor":{"type":["string","null"],"description":"Opaque cursor for fetching the next page (null if this is the last page)"},"signals":{"type":"array","items":{"$ref":"#/components/schemas/SignalInfo"},"description":"List of signals matching the query"}}},"SlackSignatureHeaders":{"type":"object","description":"Slack signature headers for webhook verification","required":["X-Slack-Signature","X-Slack-Request-Timestamp"],"properties":{"X-Slack-Request-Timestamp":{"type":"string","description":"Unix timestamp of when the request was generated"},"X-Slack-Signature":{"type":"string","description":"HMAC-SHA256 signature of the request body (hex string with v0= prefix)"}}},"TenantHeader":{"type":"object","description":"OpenAPI header parameter for X-Tenant-Id","required":["X-Tenant-Id"],"properties":{"X-Tenant-Id":{"type":"string","description":"Tenant identifier (UUID) that scopes the request to a specific tenant"}}},"UpdateGroundedSignalRequest":{"type":"object","description":"Update request for grounded signal status","required":["status"],"properties":{"recommendation":{"type":["string","null"],"description":"Optional recommendation text"},"status":{"$ref":"#/components/schemas/GroundedSignalStatus","description":"New status for the grounded signal"}}},"Value":{},"WebhookAcceptResponse":{"type":"object","description":"Webhook accept response","required":["status"],"properties":{"status":{"type":"string","description":"Acceptance status"}}}},"securitySchemes":{"bearer_auth":{"type":"http","scheme":"bearer","bearerFormat":"Opaque token","description":"Operator bearer token. User tokens are stored at rest using AES-256-GCM encryption with tenant-context binding"}}},"security":[{"bearer_auth":[]}],"tags":[{"name":"root","description":"Root endpoint"},{"name":"health","description":"Health check endpoints"},{"name":"configuration","description":"Configuration endpoints"},{"name":"operators","description":"Operator-scoped endpoints"},{"name":"providers","description":"Provider listing endpoints"},{"name":"webhooks","description":"Webhook ingest endpoints"},{"name":"jobs","description":"Jobs listing and management endpoints"},{"name":"signals","description":"Signals listing and querying endpoints"},{"name":"grounded-signals","description":"Grounded signals management endpoints"}]}